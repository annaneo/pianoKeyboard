<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="style.css">
		<title>Piano Keyboard</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
        <script src="http://www.verovio.org/javascript/latest/verovio-toolkit.js"></script>
        <script src="piano.js"></script>


		<script type="text/javascript">

            var KEYBOARD_OCTAVES = 3;
            var baseOctave = 3;

            var paeCode = "";

			$( document ).ready(function() {

				$(".keyboardcontainer").html(pianoHTML(3))

                updatePreview()

                $(".pianokeyboard li").click(function () {
                    var indexOfKey = $(this).index()
                    var paeNote = paeCodeForKeyAtIndex(indexOfKey, baseOctave, 4)
                    console.log("key " + indexOfKey + " pressed is " + paeNote)
                    paeCode += paeNote
                    updatePreview()
                });

                $("#raiseOctave").click(function () {
                    baseOctave = Math.min(baseOctave + 1, MAX_OCTAVES - KEYBOARD_OCTAVES)
                })

                $("#lowerOctave").click(function () {
                    baseOctave = Math.max(baseOctave - 1, 0)
                })

                function setChangeOctaveButtonsEnabled() {
					var isMax = baseOctave == MAX_OCTAVES
					var isMin = baseOctave == 0
					$("#raiseOctave").prop('disabled', isMax)
					$("#lowerOctave").prop('disabled', isMin)
				}

			})//end doc ready

            function updatePreview() {
                var notesSVG = notesSVGForPAECode(paeCode)

                var svgContainerDiv = $('.incipitSVG')
                svgContainerDiv.html(notesSVG)
            }

		</script>


	</head>
<body>
	<div class="keyboardcontainer">

	</div>
	
	<div class="octaveSwitch">
		<button type="button" id="lowerOctave">˂</button>
		<button type="button" id="raiseOctave">˃</button>
	</div>


<div class="incipitSVG"></div>
</body>
</html>